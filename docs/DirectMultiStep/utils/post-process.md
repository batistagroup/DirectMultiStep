# Multistep Route Post-processing

This module provides useful data structure classes and helper functions for postprocessing beam search results and multistep routes generated by DirectMultiStep models.

## Example Use

The most useful functions are `canonicalize_path_dict`, `canonicalize_path_string`, and functions that start with `find_`

```python
from directmultistep.utils.pre_process import stringify_dict
from directmultistep.utils.post_process import canonicalize_path_dict, canonicalize_path_string

path_string = "{'smiles':'CNCc1cc(-c2ccccc2F)n(S(=O)(=O)c2cccnc2)c1','children':[{'smiles':'O=Cc1cc(-c2ccccc2F)n(S(=O)(=O)c2cccnc2)c1','children':[{'smiles':'O=Cc1c[nH]c(-c2ccccc2F)c1'},{'smiles':'O=S(=O)(Cl)c1cccnc1'}]},{'smiles':'CN'}]}"

cano_path_dict = canonicalize_path_dict(eval(path_string))
cano_path_string = stringify_dict(cano_path_dict)

print(cano_path_string == canonicalize_path_string(path_string))
```

## Source Code

::: directmultistep.utils.post_process
    handler: python
    options:
      show_root_heading: true
      show_source: true
      members:
        - count_unsolved_targets
        - find_valid_paths
        - find_matching_paths
        - find_top_n_accuracy
        - remove_repetitions_within_beam_result
        - find_paths_with_commercial_sm
        - find_paths_with_correct_product_and_reactants
        - canonicalize_path_dict
        - canonicalize_path_string
        - process_paths
        - process_path_single
        - process_paths_post
        - calculate_top_k_counts_by_step_length